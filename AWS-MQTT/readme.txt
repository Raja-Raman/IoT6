This is the example code at 
https://github.com/odelot/aws-mqtt-websockets/blob/master/examples/aws-mqtt-websocket-example-pubsubclient/aws-mqtt-websocket-example-pubsubclient.ino

This uses the AWS IoT MQTT library from
https://github.com/odelot/aws-mqtt-websockets

Dependencies:

install the AWS library:
https://github.com/odelot/aws-sdk-arduino
You may have already installed another library with the same name, so rename it or move it away to avoid conflict.

Install web sockets library:
https://github.com/Links2004/arduinoWebSockets/tree/master/src

If you have not already installed the PubSub client MQTT library, install it now:
https://github.com/knolleary/pubsubclient

Finally, install the AWS MQTT library by odelot:
https://github.com/odelot/aws-mqtt-websockets

Navigate to examples folder, copy & run the code:
aws-mqtt-websocket-example-pubsubclient.ino
(Replace the credentials first).
 
 
